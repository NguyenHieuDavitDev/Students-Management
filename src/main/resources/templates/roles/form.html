<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/dashboard :: layout(
        (${mode}=='edit' ? 'Edit role' : 'New role'),
        (${mode}=='edit' ? 'Edit role' : 'New role'),
        'Role details',
        'roles',
        ~{::content}
      )}">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title th:text="${mode}=='edit' ? 'Edit role' : 'New role'">Role</title>
</head>
<body>
<div th:fragment="content">
    <div class="card">
        <div class="card-body">
            <div class="alert alert-danger" th:if="${globalError}" th:text="${globalError}">Error</div>

            <form method="post"
                  th:action="${mode}=='edit' ? @{/admin/roles/{id}(id=${roleId})} : @{/admin/roles}"
                  th:object="${roleRequest}">

                <div class="mb-3">
                    <label class="form-label">Name</label>
                    <input class="form-control" type="text" th:field="*{name}" placeholder="e.g. ADMIN">
                    <div class="text-danger small mt-1" th:if="${#fields.hasErrors('name')}"
                         th:errors="*{name}">
                        Name error
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" rows="3" th:field="*{description}"
                              placeholder="Optional"></textarea>
                    <div class="text-danger small mt-1" th:if="${#fields.hasErrors('description')}"
                         th:errors="*{description}">
                        Description error
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <button class="btn btn-primary" type="submit"
                            th:text="${mode}=='edit' ? 'Save changes' : 'Create role'">
                        Save
                    </button>
                    <a class="btn btn-outline-secondary" th:href="@{/admin/roles}">
                        <i class="fa-solid fa-arrow-left-long me-1"></i>
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

</body>
</html>

