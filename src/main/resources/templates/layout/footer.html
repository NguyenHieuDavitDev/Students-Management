<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="footer">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

    <script>
        (function () {
            const STORAGE_KEY = 'adminSidebarCollapsed';

            function applyInitialState() {
                try {
                    const stored = localStorage.getItem(STORAGE_KEY);
                    if (stored === 'true') {
                        document.body.classList.add('sidebar-collapsed');
                    }
                } catch (e) {
                    // ignore
                }
            }

            function toggleSidebar() {
                document.body.classList.toggle('sidebar-collapsed');
                try {
                    localStorage.setItem(
                        STORAGE_KEY,
                        document.body.classList.contains('sidebar-collapsed')
                    );
                } catch (e) {
                    // ignore
                }
            }

            document.addEventListener('DOMContentLoaded', function () {
                applyInitialState();
                const btn = document.getElementById('sidebarToggle');
                if (btn) {
                    btn.addEventListener('click', function (e) {
                        e.preventDefault();
                        toggleSidebar();
                    });
                }
            });
        })();
    </script>
</div>
</body>
</html>

